function PolyJS(e){this.canvas=e,this.drawingContext=e.getContext("2d");var t=this;this.polygons=[],Object.defineProperty(this,"Polygon",{writable:!1,value:function(e,i,n,r){this.PolyObj=t,this.numSides=e.length;var o=e,l=i,s=n,h=!1;this.dirty=!0,Object.defineProperty(this,"points",{configurable:!1,enumerable:!0,set:function(t){o=t,this.numSides=e.length,this.dirty=!0},get:function(){return o}}),Object.defineProperty(this,"setPoint",{configurable:!1,enumerable:!0,value:function(t,i){t==o.length+1?o.push(i):o[t]=i,this.numSides=e.length,this.dirty=!0}}),Object.defineProperty(this,"edgeColor",{configurable:!1,enumerable:!0,set:function(e){l=e,this.dirty=!0},get:function(){return l}}),Object.defineProperty(this,"fillColor",{configurable:!1,enumerable:!0,set:function(e){s=e,this.dirty=!0},get:function(){return s}}),Object.defineProperty(this,"filled",{configurable:!1,enumerable:!0,set:function(e){h=e,this.dirty=!0},get:function(){return h}}),this.edgeColor=i||"black",!1===n?this.filled=!1:(this.fillColor=n||i,this.filled=!1!==r),this.PolyObj.polygons.push(this)},enumerable:!0,configurable:!1}),Object.defineProperty(this,"draw",{configurable:!1,enumerable:!0,value:function(t){var i=this.drawingContext,n=this.polygons;(n.filter(e=>e.dirty).length==n.length||t)&&(i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.width,e.height),i.restore()),n.filter(e=>t||e.dirty).map(e=>{i.strokeStyle=e.edgeColor,i.beginPath();var t=e.points,n=[],r=e=>{for(var t=[0,0];e.attached||e.fixed;)if(e.attached){var i=e.attached;e=i[0].points[i[1]]}else if(e.fixed){var n=e.fixed;t=[t[0]+n[2][0],t[1]+n[2][1]],e=n[0].points[n[1]]}return[e[0]+t[0],e[1]+t[1]]};t.map(function(e,i){var o=t[(i+1)%t.length];n.push([r(e),r(o)])}),n.map((e,t)=>{0===t&&i.moveTo(e[0][0],e[0][1]),i.lineTo(e[1][0],e[1][1])}),i.stroke(),e.filled&&(i.fillStyle=e.fillColor,i.fill()),e.dirty=!1})}})}