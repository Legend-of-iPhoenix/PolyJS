function PolyJS(t){this.canvas=t,this.drawingContext=t.getContext("2d");var e=this;this.polygons=[],Object.defineProperty(this,"Polygon",{writable:!1,value:function(t,i,n,r){this.PolyObj=e,this.numSides=t.length;var o=t,l=i,s=n,h=!1;this.dirty=!0,Object.defineProperty(this,"points",{configurable:!1,enumerable:!0,set:function(e){o=e,this.numSides=t.length,this.dirty=!0},get:function(){return o}}),Object.defineProperty(this,"setPoint",{configurable:!1,enumerable:!0,value:function(e,i){e==o.length+1?o.push(i):o[e]=i,this.numSides=t.length,this.dirty=!0}}),Object.defineProperty(this,"edgeColor",{configurable:!1,enumerable:!0,set:function(t){l=t,this.dirty=!0},get:function(){return l}}),Object.defineProperty(this,"fillColor",{configurable:!1,enumerable:!0,set:function(t){s=t,this.dirty=!0},get:function(){return s}}),Object.defineProperty(this,"filled",{configurable:!1,enumerable:!0,set:function(t){h=t,this.dirty=!0},get:function(){return h}}),this.edgeColor=i||"black",!1===n?this.filled=!1:(this.fillColor=n||i,this.filled=r),this.PolyObj.polygons.push(this)},enumerable:!0,configurable:!1}),Object.defineProperty(this,"draw",{configurable:!1,enumerable:!0,value:function(e){var i=this.drawingContext,n=this.polygons;(n.filter(t=>t.dirty).length==n.length||e)&&(i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),i.restore()),n.filter(t=>e||t.dirty).map(t=>{i.strokeStyle=t.edgeColor,i.beginPath();var e=t.points,n=[];e.map(function(t,i){var r=e[(i+1)%e.length];r.attached&&(r=r.attached[0].points[r.attached[1]]),t.attached&&(t=t.attached[0].points[t.attached[1]]),n.push([t,r])}),n.map((t,e)=>{0===e&&i.moveTo(t[0][0],t[0][1]),i.lineTo(t[1][0],t[1][1])}),i.stroke(),t.filled&&(i.fillStyle=t.fillColor,i.fill()),t.dirty=!1})}})}