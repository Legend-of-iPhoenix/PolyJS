function PolyJS(e){var t=Object;this.canvas=e,this.drawingContext=e.getContext("2d");var i=this;this.polygons=[],t.defineProperty(this,"Polygon",{writable:!1,value:function(e,n,r,o,l){if(e.length<3)throw new Error("You cannot have a polygon with less than 3 points.");this.PolyObj=i,this.numSides=e.length;var s=e,a=n,h=r,u=o,f=l;this.dirty=!0,t.defineProperty(this,"points",{configurable:!1,enumerable:!0,set:function(t){s=t,this.numSides=e.length,this.dirty=!0},get:function(){return s}}),t.defineProperties(this,{setPoint:{configurable:!1,enumerable:!0,value:function(e,t){e==s.length+1?s.push(t):s[e]=t,this.numSides=s.length,this.dirty=!0}},parsePoint:{configurable:!1,enumerable:!0,writable:!1,value:function(e){for(var t=s[e],i=[0,0],n=this;t.attached||t.fixed;)if(t.attached){var r=t.attached;t=(n=r[0]).points[r[1]]}else if(t.fixed){var o=t.fixed;i=[i[0]+o[2][0],i[1]+o[2][1]],t=("self"==o[0]?n:o[0]).points[o[1]],n="self"==o[0]?n:o[0]}return[t[0]+i[0],t[1]+i[1]]}},edgeColor:{configurable:!1,enumerable:!0,set:function(e){a=e,this.dirty=!0},get:function(){return a}},fillColor:{configurable:!1,enumerable:!0,set:function(e){h=e,this.dirty=!0},get:function(){return h}},filled:{configurable:!1,enumerable:!0,set:function(e){u=e,this.dirty=!0},get:function(){return u}},edgeThickness:{configurable:!1,enumerable:!0,set:function(e){f=e,this.dirty=!0},get:function(){return f}}}),this.edgeColor=n||"black",this.edgeThickness=l||1,!1===r?this.filled=!1:(this.fillColor=r||n,this.filled=!1!==o),"number"==typeof o&&(this.edgeThickness=o),this.PolyObj.polygons.push(this)},enumerable:!0,configurable:!1}),t.defineProperty(this,"draw",{configurable:!1,enumerable:!0,value:function(t){var i=this.drawingContext,n=this.polygons;(t||n.filter(e=>e.dirty).length==n.length)&&(i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.width,e.height),i.restore()),n.filter(e=>t||e.dirty).map(e=>{i.strokeStyle=e.edgeColor,i.lineWidth=e.edgeThickness,i.beginPath();var t=e.points,n=[];t.map(function(i,r){var o=(r+1)%t.length;n.push([e.parsePoint(r),e.parsePoint(o)])}),n.map((e,t)=>{t||i.moveTo(e[0][0],e[0][1]),i.lineTo(e[1][0],e[1][1])}),i.stroke(),e.filled&&(i.fillStyle=e.fillColor,i.fill()),e.dirty=!1})}})}
